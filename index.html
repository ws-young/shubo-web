<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
			crossorigin="anonymous"
		/>
		<title>Shubo website</title>
	</head>
	<body>
		<div
			style="
				background: #f6f8f9;
				min-height: 100dvh;
				height: 100%;
				display: grid;
				place-items: center;
			"
			class="overflow-auto"
		>
			<div
				style="
					max-width: 550px;
					width: 100%;
					margin: auto;
					border: 1px solid #ddd;
					background: #fff;
					padding: 16px;
					border-radius: 8px;
				"
			>
				<h3 class="text-center">Login</h3>

				<form id="login-form" class="d-flex flex-column" style="gap: 8px">
					<div>
						<label class="mb-1">帳號</label>
						<input type="text" class="form-control" />
					</div>
					<div>
						<label class="mb-1">密碼</label>
						<input
							type="text"
							autocomplete="new-password"
							class="form-control"
						/>
					</div>
					<div>
						<label class="mb-1">模組</label>
						<div class="d-flex flex-wrap" style="gap: 8px">
							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="productCode"
									id="chem"
									checked
								/>
								<label class="form-check-label" for="chem"> 化學雲 </label>
							</div>
							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="productCode"
									id="permit"
								/>
								<label class="form-check-label" for="permit"> 許可雲 </label>
							</div>
							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="productCode"
									id="legal"
								/>
								<label class="form-check-label" for="legal"> 法規雲 </label>
							</div>
							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="productCode"
									id="license"
								/>
								<label class="form-check-label" for="license"> 證照雲 </label>
							</div>
							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="productCode"
									id="risk"
								/>
								<label class="form-check-label" for="risk"> 風險雲 </label>
							</div>
							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="productCode"
									id="indicators"
								/>
								<label class="form-check-label" for="indicators">
									ESH Clouds
								</label>
							</div>
							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="productCode"
									id="action"
								/>
								<label class="form-check-label" for="action"> 行動雲 </label>
							</div>
							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="productCode"
									id="carbon"
								/>
								<label class="form-check-label" for="carbon"> 碳盤雲 </label>
							</div>
						</div>
					</div>
					<div>
						<input type="submit" value="登入" class="w-100 btn btn-primary" />
					</div>
				</form>
			</div>
		</div>

		<script>
			const productDic = {
				chem: 0,
				permit: 1,
				legal: 2,
				license: 4,
				risk: 6,
				indicators: 7,
				action: 8,
				carbon: 9
			};

			document
				.getElementById('login-form')
				.addEventListener('submit', event => {
					event.preventDefault();

					const productCode = document.querySelector(
						'input[name="productCode"]:checked'
					).id;

					login(productDic[productCode]);
				});

			login = productCode => {
				window.open(
					`https://eshclouds-indicator-develop.azurewebsites.net/entry/redirect?code=${Date.now()}&productCode=${productCode}`,
					'_self'
				);
			};
		</script>
	</body>
</html>
